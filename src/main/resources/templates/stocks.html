<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" xmlns:http="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="ISO-8859-1">
    <title>Stocks</title>
    <link rel="stylesheet" href="../static/style.css" th:href="@{/style.css}">
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!--    <link rel="stylesheet"-->
<!--          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"-->
<!--          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"-->
<!--          crossorigin="anonymous">-->


</head>
<style>

.modal {
color:black !important;
}

<!--  .user-data-1 {-->
<!--padding: 16px 0 5px;-->
<!--    display:inline;-->
<!--    margin-top: -15px;-->
<!--}-->

<!--.user-data-2 {-->
<!-- padding: 16px 0 5px;-->
<!--    display:inline;-->
<!--    margin-top: -15px;-->
<!--}-->

.navbar {
     background-color: #032069 !important;
   border: none !important;
   color: white !important;
    text-align: center;
}
.modal{
    z-index: 999999 !important;
}
.btn-w {
    background-color: #fff !important;
}
.container-1 {
    margin-left: 50px;
}
    body {
  margin: 0;
  color: white !important;
  background: linear-gradient(87deg, #5e72e4 0, #825ee4 100%) !important;
}

table {
   background-color: #fff;
   background-clip: border-box;
   border: 1px solid rgba(0, 0, 0, .05);
  border-radius: .375rem;
}

th {
    color: grey;
}

tr {
    color: black;
}

</style>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" th:href="@{/}"><img src="https://paypal.service-now.com/b64fb7cc13979200308236722244b0a2.iix"></a>
        <span style="padding-bottom:10px;" class="banner-text" data-original-title="Trade">Trade</span>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
<!--                <li class="nav-item">-->

<!--                    <a class="nav-link active" aria-current="page" href="/stocks">Stocks</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="/portfolio">Portfolio</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">Order History</a>-->
<!--                </li>-->

<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">Order History</a>-->
<!--                </li>-->
                <li style = "margin-left:100px;" sec:authorize="isAuthenticated()"><a style = "text-decoration: none !important;
color: #fff !important;" th:href="@{/stocks}">Stocks</a></li>
                <li style = "margin-left:100px; " sec:authorize="isAuthenticated()"><a style = " text-decoration: none !important;
color: #fff !important;" th:href="@{/portfolio}">Portfolio</a></li>
                <li style = "margin-left:100px;" sec:authorize="isAuthenticated()"><a style = " text-decoration: none !important;
color: #fff !important;" th:href="@{/orders}">Orders</a></li>
                <li style = "margin-left:100px;" sec:authorize="isAuthenticated()"><a style = "text-decoration: none !important;
color: #fff !important;" th:href="@{/wallet}">Wallet</a></li>

                <li style = "margin-left:100px;"><a style = "text-decoration: none !important;
color: #fff !important;" th:href="@{/admin/stock-refresher}">Generate</a></li>

                <li style = "margin-left:300px;" sec:authorize="isAuthenticated()">

                    <a style="color:#2dce89 !important;" ><span sec:authentication="principal.username"> User</span></a>
<!--                    <a th:href="@{/logout}" style="color:#fb643f !important;">Logout</a>-->
                </li>

                <li style = "margin-left:100px;" sec:authorize="isAuthenticated()">
                    <a th:href="@{/logout}" style="color:#fb643f !important; text-decoration:none;">Logout</a>
                </li>


            </ul>
        </div>
    </div>
</nav>
<!-- create navigation bar ( header) -->
<!--<nav class="navbar navbar-inverse navbar-fixed-top">-->
<!--    <div class="container">-->
<!--        <div class="navbar-header">-->
<!--            <button type="button" class="navbar-toggle collapsed"-->
<!--                    data-toggle="collapse" data-target="#navbar" aria-expanded="false"-->
<!--                    aria-controls="navbar">-->
<!--                <span class="sr-only">Toggle navigation</span> <span-->
<!--                    class="icon-bar"></span> <span class="icon-bar"></span> <span-->
<!--                    class="icon-bar"></span>-->
<!--            </button>-->
<!--            <div class="company-info">-->
<!--                <a class="navbar-brand" href="#" th:href="@{/}"><img src="https://paypal.service-now.com/b64fb7cc13979200308236722244b0a2.iix"></a>-->
<!--                <span class="banner-text" data-original-title="Trade">Trade</span>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div id="navbar" class="collapse navbar-collapse">-->
<!--            <ul class="nav navbar-nav">-->
<!--                <li sec:authorize="isAuthenticated()"><a th:href="@{/portfolio}">Portfolio</a></li>-->
<!--                <li sec:authorize="isAuthenticated()"><a th:href="@{/orders}">Order History</a></li>-->
<!--                <li sec:authorize="isAuthenticated()"><a th:href="@{/wallet}">Wallet</a></li>-->
<!--                <div class="user-data-1">-->
<!--                    <li><a style="color:#2dce89;" ><span sec:authentication="principal.username"> User</span></a></li>-->
<!--                </div>-->
<!--                <div class="user-data-2">-->
<!--                    <li sec:authorize="isAuthenticated()"><a th:href="@{/logout}" style="color:#fb643f;">Logout</a></li>-->
<!--                </div>-->

<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<br>
<br>

<div class ="container-1">
    <div class = "row" style = "margin-left: 60px; margin-bottom: 20px; margin-top: 10px;">
        <span><h1> List of all stocks</h1></span>
        <div th:if="${param.cat}">
            <div th:if="${param.cat[0] == 'Agriculture'}">
                <div class="btn-group" role="group" aria-label="...">

                    <a href="/stocks"><button type="button" class="btn btn-default">All</button></a>
                    <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-info">Agriculture</button></a>
                    <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-default">Technology</button></a>
                    <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-default">Finance</button></a>
                    <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-default">Automobile</button></a>
                    <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-default">Energy</button></a>
                </div>
            </div>

            <div th:if="${param.cat[0] == 'Technology'}">
                <div class="btn-group" role="group" aria-label="...">

                    <a href="/stocks"><button type="button" class="btn btn-default">All</button></a>
                    <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-default">Agriculture</button></a>
                    <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-info">Technology</button></a>
                    <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-default">Finance</button></a>
                    <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-default">Automobile</button></a>
                    <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-default">Energy</button></a>
                </div>
            </div>


            <div th:if="${param.cat[0] == 'Finance'}">
                <div class="btn-group" role="group" aria-label="...">

                    <a href="/stocks"><button type="button" class="btn btn-default">All</button></a>
                    <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-default">Agriculture</button></a>
                    <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-default">Technology</button></a>
                    <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-info">Finance</button></a>
                    <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-default">Automobile</button></a>
                    <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-default">Energy</button></a>
                </div>
            </div>

            <div th:if="${param.cat[0] == 'Automobile'}">
                <div class="btn-group" role="group" aria-label="...">

                    <a href="/stocks"><button type="button" class="btn btn-default">All</button></a>
                    <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-default">Agriculture</button></a>
                    <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-default">Technology</button></a>
                    <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-default">Finance</button></a>
                    <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-info">Automobile</button></a>
                    <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-default">Energy</button></a>
                </div>
            </div>

            <div th:if="${param.cat[0] == 'Energy'}">
                <div class="btn-group" role="group" aria-label="...">

                    <a href="/stocks"><button type="button" class="btn btn-default">All</button></a>
                    <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-default">Agriculture</button></a>
                    <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-default">Technology</button></a>
                    <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-default">Finance</button></a>
                    <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-default">Automobile</button></a>
                    <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-info">Energy</button></a>
                </div>
            </div>




        </div>

        <div th:unless="${param.cat}">
        <div class="btn-group" role="group" aria-label="...">

            <a href="/stocks"><button type="button" class="btn btn-info">All</button></a>
            <a href="/stocks/specific?cat=Agriculture"><button type="button" class="btn btn-default">Agriculture</button></a>
            <a href="/stocks/specific?cat=Technology"><button type="button" class="btn btn-default">Technology</button></a>
            <a href="/stocks/specific?cat=Finance"><button type="button" class="btn btn-default">Finance</button></a>
            <a href="/stocks/specific?cat=Automobile"><button type="button" class="btn btn-default">Automobile</button></a>
            <a href="/stocks/specific?cat=Energy"><button type="button" class="btn btn-default">Energy</button></a>
        </div>
            </div>
    </div>

<!--    <div class = "row">-->
<!--        <div class = "col-lg-3">-->
<!--            <a th:href = "@{/students/new}" class = "btn btn-primary btn-sm mb-3"> Add Student</a>-->
<!--        </div>-->
<!--    </div>-->
    <div class="row">
        <div class = "col-md-7 justify-content-start">
    <table class = "table table-borderless">
        <thead class = "thead-dark">
        <tr>
            <th> Id</th>
            <th> Logo</th>
            <th> Name</th>
            <th> AUM </th>
            <th> Price </th>
            <th> Diff </th>
<!--            <th> Diff </th>-->
<!--            <th> Star </th>-->
        </tr>
        </thead>

        <tbody>
        <tr th:each = "stock: ${nonstocks}">
            <td th:text = "${stock.id}"></td>
            <td><img th:src="${stock.image}" width="50" height="50"/></td>
            <td th:text = "${stock.name}"></td>
            <td th:text = "'Rs ' + ${stock.aum}"></td>
            <td th:text = "'Rs ' + ${stock.curPrice}"></td>
<!--            <td th:text = "${stock.diff}"></td>-->
            <td th:if = "${stock.diff >= 0}" style="color: green;" th:text = "'+' + ${stock.diff}"></td>
            <td th:unless = "${stock.diff >= 0}" style="color: red;" th:text = "${stock.diff}"></td>
            <td><a><button type="button" class="btn btn-default btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <span class="glyphicon glyphicon-credit-card" aria-hidden="true"></span> Trade
            </button></a></td>
            <td><a th:href = "@{/api/favAdd/{id}(id=${stock.id})}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-heart" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z"/>
                    <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                </svg></span>
            </a></td>


<!--            <td th:text = "${stock.name}"></td>-->
<!--            <td th:text = "${stock.aum}"></td>-->
<!--            <td th:text = "${stock.diff}"></td>-->
<!--            <td>-->
<!--                <a th:href = "@{/students/edit/{id}(id=${student.id})}"-->
<!--                   class = "btn btn-primary">Update</a>-->

<!--                <a th:href = "@{/students/{id}(id=${student.id})}"-->
<!--                   class = "btn btn-danger">Delete</a>-->

<!--            </td>-->
        </tr>
        </tbody>

    </table>
        </div>
        <div class = "col-md-4 justify-content-start">
            <div><h2>Favorite Stocks</h2></div>
            <table class = "table table-borderless">
                <thead class = "thead-dark">
                <tr>
                    <th> Id</th>
                    <th> Logo</th>
                    <th> Name</th>
                    <th> AUM</th>
                    <th> Price </th>
                    <th> Diff </th>
<!--                    <th> Diff </th>-->
<!--                    <th> Star </th>-->
                </tr>
                </thead>

                <tbody>
                <tr th:each = "stock: ${favstocks}">
                    <td th:text = "${stock.id}"></td>
                    <td><img th:src="${stock.image}" width="50" height="50"/></td>
                    <td th:text = "${stock.name}"></td>
                    <td th:text = "'Rs ' + ${stock.aum}"></td>
                    <td th:text = "'Rs ' + ${stock.curPrice}"></td>
<!--                    <td th:text = "${stock.diff}"></td>-->
                    <td th:if = "${stock.diff >= 0}" style="color: green;" th:text = "'+' + ${stock.diff}"></td>
                    <td th:unless = "${stock.diff >= 0}" style="color: red;" th:text = "${stock.diff}"></td>
                    <td><button type="button" class="btn btn-default btn-sm btn-info " data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <span class="glyphicon glyphicon-credit-card" aria-hidden="true"></span> Trade
                    </button>
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Trade Stock</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form th:action="@{/api/transaction}" method="post" th:object="${trans}">
                                            <div class="mb-3">
                                                <label for="stock-id" class="form-label">Stock ID</label>
                                                <input type="number" class="form-control" id="stock-id" th:field="*{stockId}">
                                            </div>
                                            <select class="mb-3 form-select" aria-label="Default select example" th:field="*{orderType}">
                                                <option selected value="None">Transaction type</option>
                                                <option value="Buy">Buy</option>
                                                <option value="Sell">Sell</option>

                                            </select>
                                            <div class="mb-3">
                                                <label for="quantity" class="form-label">Quantity</label>
                                                <input type="number" class="form-control" id="quantity" th:field="*{quantity}">
                                            </div>
<!--                                            <button type="submit" class="btn btn-primary">Confirm</button>-->
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                <button type="submit" class="btn btn-primary">Confirm</button>
                                            </div>

                                        </form>
                                    </div>
<!--                                    <div class="modal-footer">-->
<!--                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>-->
<!--                                        <button type="button" class="btn btn-primary">Confirm</button>-->
<!--                                    </div>-->
                                </div>
                            </div>
                        </div>



                    </td>
                    <td><a th:href = "@{/api/favRem/{id}(id=${stock.id})}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-heart-fill" viewBox="0 0 16 16">
                            <path d="M2 15.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v13.5zM8 4.41c1.387-1.425 4.854 1.07 0 4.277C3.146 5.48 6.613 2.986 8 4.412z"/>
                        </svg></span>
                    </a></td>

                </tr>
                </tbody>

            </table>
        </div>
    </div>

</div>
<!--<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">-->
<!--    gee-->
<!--</button>-->

<!-- Modal -->
<!--<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="exampleModalLabel">Trade Stock</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <form>-->
<!--                    <div class="mb-3">-->
<!--                        <label for="stock-name" class="form-label">Stock</label>-->
<!--                        <input type="text" class="form-control" id="stock-name" value="${stock.curPrice}" readonly>-->
<!--                    </div>-->
<!--                    <select class="mb-3 form-select" aria-label="Default select example">-->
<!--                        <option selected>Transaction type</option>-->
<!--                        <option value="Buy">Buy</option>-->
<!--                        <option value="Sell">Sell</option>-->

<!--                    </select>-->
<!--                    <div class="mb-3">-->
<!--                        <label for="quantity" class="form-label">Quantity</label>-->
<!--                        <input type="number" class="form-control" id="quantity">-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label for="cost" class="form-label">Price Per Stock</label>-->
<!--                        <input type="number" class="form-control" id="cost">-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>-->
<!--                <button type="button" class="btn btn-primary">Confirm</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>